{% extends "layout/app.html" %}

{% block title %} | Profile {% endblock %}

{% block content %}
<div class="col ms-3">
  <div class="col-11 d-flex flex-row align-items-center justify-content-between mt-3">
    <h3 class="fw-bold">Profile</h3>
  </div>
  <div class="d-flex flex-row align-items-center col-11">
    <div class="col-5 d-flex flex-column align-items-center">
      <div class="w-75 p-3">
        <img class="rounded-circle shadow-sm w-100" src="{{ url_for('static', filename='icons/profile.svg') }}">
      </div>
      <button class="btn btn-secondary fw-bold mt-3">Upload New Picture</button>
    </div>
    <div class="col-6 d-flex flex-column align-items-center">
      {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
          <div class="w-100 alert alert-{{ messages[0][0] }}">
            {{ messages[0][1] }}
          </div>
        {% endif %}
      {% endwith %}
      <form class="col-12 d-flex flex-column justify-content-center align-items-center fw-semibold" action="{{ url_for('base.update_profile_data') }}" method="POST">
        <div class="mb-2 w-100">
          <label for="input-email" class="form-label">Name</label>
          <input type="text" class="form-control" id="input-email" name="name" value="{{ current_user.name }}" required>
        </div>
        <div class="mb-2 w-100">
          <label for="input-email" class="form-label">Email address</label>
          <input type="email" class="form-control" id="input-email" name="email" value="{{ current_user.email }}" required>
        </div>
        <div class="mb-2 w-100">
          <label for="input-email" class="form-label">Telephone</label>
          <input type="text" class="form-control" id="input-email" name="telephone" value="{{ current_user.telephone }}" required>
        </div>
        <div class="mb-2 w-100">
          <label for="options" class="form-label">Gender</label>
          <div id="options" class="w-100 d-flex flex-row justify-content-start">
            {% set gender = [
              ('M', 'Male', 'male-radio'),
              ('F', 'Female', 'female-radio')
            ] -%}
      
            {% for code, label, id in gender %}
              <div class="form-check me-4">
                <input class="form-check-input" type="radio" name="gender" id="{{ id }}" value="{{ code }}" {% if current_user.gender == code %} checked {% endif %}>
                <label class="form-check-label" for="{{ id }}">
                  {{ label }}
                </label>
              </div>
            {% endfor %}
          </div>
        </div>
        <button type="submit" class="btn btn-dark w-100 fw-bold mt-3 fw-bold border-2 border-dark">Update Profile</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
